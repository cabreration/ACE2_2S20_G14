function cov_24tl83nxh5(){var path="C:\\Users\\arnol\\Documents\\GitHub\\practica2_g6\\backend\\app\\controllers\\producto.js";var hash="0b9eea74b61d83b965d00476f1e989f34df730ee";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\arnol\\Documents\\GitHub\\practica2_g6\\backend\\app\\controllers\\producto.js",statementMap:{"0":{start:{line:1,column:11},end:{line:1,column:31}},"1":{start:{line:2,column:17},end:{line:2,column:28}},"2":{start:{line:4,column:0},end:{line:4,column:28}},"3":{start:{line:7,column:0},end:{line:33,column:2}},"4":{start:{line:9,column:1},end:{line:11,column:2}},"5":{start:{line:10,column:2},end:{line:10,column:94}},"6":{start:{line:13,column:1},end:{line:32,column:5}},"7":{start:{line:22,column:3},end:{line:27,column:4}},"8":{start:{line:23,column:4},end:{line:26,column:7}},"9":{start:{line:28,column:3},end:{line:31,column:6}},"10":{start:{line:36,column:0},end:{line:60,column:2}},"11":{start:{line:37,column:16},end:{line:37,column:33}},"12":{start:{line:39,column:1},end:{line:43,column:2}},"13":{start:{line:40,column:2},end:{line:42,column:5}},"14":{start:{line:45,column:1},end:{line:59,column:4}},"15":{start:{line:46,column:2},end:{line:51,column:3}},"16":{start:{line:47,column:3},end:{line:50,column:6}},"17":{start:{line:52,column:2},end:{line:56,column:3}},"18":{start:{line:53,column:3},end:{line:55,column:6}},"19":{start:{line:58,column:2},end:{line:58,column:24}},"20":{start:{line:63,column:0},end:{line:97,column:2}},"21":{start:{line:64,column:1},end:{line:68,column:2}},"22":{start:{line:65,column:2},end:{line:67,column:5}},"23":{start:{line:70,column:16},end:{line:70,column:33}},"24":{start:{line:72,column:1},end:{line:76,column:2}},"25":{start:{line:73,column:2},end:{line:75,column:5}},"26":{start:{line:78,column:1},end:{line:96,column:5}},"27":{start:{line:80,column:3},end:{line:84,column:4}},"28":{start:{line:81,column:4},end:{line:83,column:7}},"29":{start:{line:86,column:3},end:{line:89,column:6}},"30":{start:{line:92,column:3},end:{line:95,column:6}},"31":{start:{line:100,column:0},end:{line:127,column:2}},"32":{start:{line:101,column:16},end:{line:101,column:33}},"33":{start:{line:103,column:1},end:{line:107,column:2}},"34":{start:{line:104,column:2},end:{line:106,column:5}},"35":{start:{line:109,column:1},end:{line:126,column:5}},"36":{start:{line:111,column:3},end:{line:115,column:4}},"37":{start:{line:112,column:4},end:{line:114,column:7}},"38":{start:{line:117,column:3},end:{line:119,column:6}},"39":{start:{line:122,column:3},end:{line:125,column:6}},"40":{start:{line:130,column:0},end:{line:141,column:2}},"41":{start:{line:131,column:1},end:{line:140,column:5}},"42":{start:{line:133,column:3},end:{line:133,column:25}},"43":{start:{line:136,column:3},end:{line:139,column:6}},"44":{start:{line:144,column:0},end:{line:191,column:2}},"45":{start:{line:145,column:4},end:{line:149,column:5}},"46":{start:{line:146,column:8},end:{line:148,column:11}},"47":{start:{line:150,column:21},end:{line:151,column:26}},"48":{start:{line:153,column:4},end:{line:157,column:5}},"49":{start:{line:154,column:8},end:{line:156,column:11}},"50":{start:{line:158,column:4},end:{line:190,column:11}},"51":{start:{line:177,column:12},end:{line:182,column:13}},"52":{start:{line:178,column:16},end:{line:181,column:19}},"53":{start:{line:183,column:12},end:{line:188,column:13}},"54":{start:{line:184,column:16},end:{line:187,column:19}},"55":{start:{line:189,column:12},end:{line:189,column:34}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:17},end:{line:7,column:18}},loc:{start:{line:7,column:31},end:{line:33,column:1}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:21,column:2},end:{line:21,column:3}},loc:{start:{line:21,column:20},end:{line:32,column:3}},line:21},"2":{name:"(anonymous_2)",decl:{start:{line:36,column:18},end:{line:36,column:19}},loc:{start:{line:36,column:32},end:{line:60,column:1}},line:36},"3":{name:"(anonymous_3)",decl:{start:{line:45,column:35},end:{line:45,column:36}},loc:{start:{line:45,column:56},end:{line:59,column:2}},line:45},"4":{name:"(anonymous_4)",decl:{start:{line:63,column:17},end:{line:63,column:18}},loc:{start:{line:63,column:31},end:{line:97,column:1}},line:63},"5":{name:"(anonymous_5)",decl:{start:{line:79,column:8},end:{line:79,column:9}},loc:{start:{line:79,column:16},end:{line:90,column:3}},line:79},"6":{name:"(anonymous_6)",decl:{start:{line:91,column:9},end:{line:91,column:10}},loc:{start:{line:91,column:16},end:{line:96,column:3}},line:91},"7":{name:"(anonymous_7)",decl:{start:{line:100,column:17},end:{line:100,column:18}},loc:{start:{line:100,column:31},end:{line:127,column:1}},line:100},"8":{name:"(anonymous_8)",decl:{start:{line:110,column:8},end:{line:110,column:9}},loc:{start:{line:110,column:16},end:{line:120,column:3}},line:110},"9":{name:"(anonymous_9)",decl:{start:{line:121,column:9},end:{line:121,column:10}},loc:{start:{line:121,column:16},end:{line:126,column:3}},line:121},"10":{name:"(anonymous_10)",decl:{start:{line:130,column:17},end:{line:130,column:18}},loc:{start:{line:130,column:32},end:{line:141,column:1}},line:130},"11":{name:"(anonymous_11)",decl:{start:{line:132,column:8},end:{line:132,column:9}},loc:{start:{line:132,column:16},end:{line:134,column:3}},line:132},"12":{name:"(anonymous_12)",decl:{start:{line:135,column:9},end:{line:135,column:10}},loc:{start:{line:135,column:16},end:{line:140,column:3}},line:135},"13":{name:"(anonymous_13)",decl:{start:{line:144,column:15},end:{line:144,column:16}},loc:{start:{line:144,column:29},end:{line:191,column:1}},line:144},"14":{name:"(anonymous_14)",decl:{start:{line:176,column:8},end:{line:176,column:9}},loc:{start:{line:176,column:28},end:{line:190,column:9}},line:176}},branchMap:{"0":{loc:{start:{line:9,column:1},end:{line:11,column:2}},type:"if",locations:[{start:{line:9,column:1},end:{line:11,column:2}},{start:{line:9,column:1},end:{line:11,column:2}}],line:9},"1":{loc:{start:{line:9,column:5},end:{line:9,column:63}},type:"binary-expr",locations:[{start:{line:9,column:5},end:{line:9,column:21}},{start:{line:9,column:25},end:{line:9,column:43}},{start:{line:9,column:47},end:{line:9,column:63}}],line:9},"2":{loc:{start:{line:17,column:15},end:{line:17,column:56}},type:"binary-expr",locations:[{start:{line:17,column:15},end:{line:17,column:35}},{start:{line:17,column:39},end:{line:17,column:56}}],line:17},"3":{loc:{start:{line:18,column:8},end:{line:18,column:27}},type:"binary-expr",locations:[{start:{line:18,column:8},end:{line:18,column:21}},{start:{line:18,column:25},end:{line:18,column:27}}],line:18},"4":{loc:{start:{line:22,column:3},end:{line:27,column:4}},type:"if",locations:[{start:{line:22,column:3},end:{line:27,column:4}},{start:{line:22,column:3},end:{line:27,column:4}}],line:22},"5":{loc:{start:{line:24,column:17},end:{line:24,column:34}},type:"binary-expr",locations:[{start:{line:24,column:17},end:{line:24,column:28}},{start:{line:24,column:32},end:{line:24,column:34}}],line:24},"6":{loc:{start:{line:39,column:1},end:{line:43,column:2}},type:"if",locations:[{start:{line:39,column:1},end:{line:43,column:2}},{start:{line:39,column:1},end:{line:43,column:2}}],line:39},"7":{loc:{start:{line:39,column:5},end:{line:39,column:47}},type:"binary-expr",locations:[{start:{line:39,column:5},end:{line:39,column:24}},{start:{line:39,column:28},end:{line:39,column:47}}],line:39},"8":{loc:{start:{line:46,column:2},end:{line:51,column:3}},type:"if",locations:[{start:{line:46,column:2},end:{line:51,column:3}},{start:{line:46,column:2},end:{line:51,column:3}}],line:46},"9":{loc:{start:{line:49,column:16},end:{line:49,column:33}},type:"binary-expr",locations:[{start:{line:49,column:16},end:{line:49,column:27}},{start:{line:49,column:31},end:{line:49,column:33}}],line:49},"10":{loc:{start:{line:52,column:2},end:{line:56,column:3}},type:"if",locations:[{start:{line:52,column:2},end:{line:56,column:3}},{start:{line:52,column:2},end:{line:56,column:3}}],line:52},"11":{loc:{start:{line:64,column:1},end:{line:68,column:2}},type:"if",locations:[{start:{line:64,column:1},end:{line:68,column:2}},{start:{line:64,column:1},end:{line:68,column:2}}],line:64},"12":{loc:{start:{line:64,column:5},end:{line:64,column:106}},type:"binary-expr",locations:[{start:{line:64,column:5},end:{line:64,column:21}},{start:{line:64,column:25},end:{line:64,column:43}},{start:{line:64,column:47},end:{line:64,column:68}},{start:{line:64,column:72},end:{line:64,column:86}},{start:{line:64,column:90},end:{line:64,column:106}}],line:64},"13":{loc:{start:{line:72,column:1},end:{line:76,column:2}},type:"if",locations:[{start:{line:72,column:1},end:{line:76,column:2}},{start:{line:72,column:1},end:{line:76,column:2}}],line:72},"14":{loc:{start:{line:72,column:5},end:{line:72,column:47}},type:"binary-expr",locations:[{start:{line:72,column:5},end:{line:72,column:24}},{start:{line:72,column:28},end:{line:72,column:47}}],line:72},"15":{loc:{start:{line:80,column:3},end:{line:84,column:4}},type:"if",locations:[{start:{line:80,column:3},end:{line:84,column:4}},{start:{line:80,column:3},end:{line:84,column:4}}],line:80},"16":{loc:{start:{line:94,column:16},end:{line:94,column:33}},type:"binary-expr",locations:[{start:{line:94,column:16},end:{line:94,column:27}},{start:{line:94,column:31},end:{line:94,column:33}}],line:94},"17":{loc:{start:{line:103,column:1},end:{line:107,column:2}},type:"if",locations:[{start:{line:103,column:1},end:{line:107,column:2}},{start:{line:103,column:1},end:{line:107,column:2}}],line:103},"18":{loc:{start:{line:103,column:5},end:{line:103,column:47}},type:"binary-expr",locations:[{start:{line:103,column:5},end:{line:103,column:24}},{start:{line:103,column:28},end:{line:103,column:47}}],line:103},"19":{loc:{start:{line:111,column:3},end:{line:115,column:4}},type:"if",locations:[{start:{line:111,column:3},end:{line:115,column:4}},{start:{line:111,column:3},end:{line:115,column:4}}],line:111},"20":{loc:{start:{line:124,column:16},end:{line:124,column:33}},type:"binary-expr",locations:[{start:{line:124,column:16},end:{line:124,column:27}},{start:{line:124,column:31},end:{line:124,column:33}}],line:124},"21":{loc:{start:{line:138,column:16},end:{line:138,column:33}},type:"binary-expr",locations:[{start:{line:138,column:16},end:{line:138,column:27}},{start:{line:138,column:31},end:{line:138,column:33}}],line:138},"22":{loc:{start:{line:145,column:4},end:{line:149,column:5}},type:"if",locations:[{start:{line:145,column:4},end:{line:149,column:5}},{start:{line:145,column:4},end:{line:149,column:5}}],line:145},"23":{loc:{start:{line:153,column:4},end:{line:157,column:5}},type:"if",locations:[{start:{line:153,column:4},end:{line:157,column:5}},{start:{line:153,column:4},end:{line:157,column:5}}],line:153},"24":{loc:{start:{line:177,column:12},end:{line:182,column:13}},type:"if",locations:[{start:{line:177,column:12},end:{line:182,column:13}},{start:{line:177,column:12},end:{line:182,column:13}}],line:177},"25":{loc:{start:{line:180,column:32},end:{line:180,column:49}},type:"binary-expr",locations:[{start:{line:180,column:32},end:{line:180,column:43}},{start:{line:180,column:47},end:{line:180,column:49}}],line:180},"26":{loc:{start:{line:183,column:12},end:{line:188,column:13}},type:"if",locations:[{start:{line:183,column:12},end:{line:188,column:13}},{start:{line:183,column:12},end:{line:188,column:13}}],line:183}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},b:{"0":[0,0],"1":[0,0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0,0,0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0b9eea74b61d83b965d00476f1e989f34df730ee"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_24tl83nxh5=function(){return actualCoverage;};}return actualCoverage;}cov_24tl83nxh5();const db=(cov_24tl83nxh5().s[0]++,require("../models"));const Producto=(cov_24tl83nxh5().s[1]++,db.producto);cov_24tl83nxh5().s[2]++;exports.Producto=Producto;// Crear y guardar un producto
cov_24tl83nxh5().s[3]++;exports.create=(req,res)=>{cov_24tl83nxh5().f[0]++;cov_24tl83nxh5().s[4]++;if((cov_24tl83nxh5().b[1][0]++,!req.body.nombre)||(cov_24tl83nxh5().b[1][1]++,!req.body.vendedor)||(cov_24tl83nxh5().b[1][2]++,!req.body.precio)){cov_24tl83nxh5().b[0][0]++;cov_24tl83nxh5().s[5]++;return res.status(400).json({message:"Los datos enviados del producto son incorrectos"});}else{cov_24tl83nxh5().b[0][1]++;}cov_24tl83nxh5().s[6]++;Producto.create({nombre:req.body.nombre,vendedor:req.body.vendedor,precio:req.body.precio,descripcion:(cov_24tl83nxh5().b[2][0]++,req.body.descripcion)||(cov_24tl83nxh5().b[2][1]++,"No categorizado"),tags:(cov_24tl83nxh5().b[3][0]++,req.body.tags)||(cov_24tl83nxh5().b[3][1]++,[])},// callback
(err,product)=>{cov_24tl83nxh5().f[1]++;cov_24tl83nxh5().s[7]++;if(err){cov_24tl83nxh5().b[4][0]++;cov_24tl83nxh5().s[8]++;return res.status(500).json({db_message:(cov_24tl83nxh5().b[5][0]++,err.message)||(cov_24tl83nxh5().b[5][1]++,""),message:"Error al agregar producto"});}else{cov_24tl83nxh5().b[4][1]++;}cov_24tl83nxh5().s[9]++;return res.status(201).json({producto:product,message:"Creado"});});};// Obtener un producto con su codigo
cov_24tl83nxh5().s[10]++;exports.findOne=(req,res)=>{cov_24tl83nxh5().f[2]++;const codigo=(cov_24tl83nxh5().s[11]++,req.params.codigo);cov_24tl83nxh5().s[12]++;if((cov_24tl83nxh5().b[7][0]++,codigo.length!=24)&&(cov_24tl83nxh5().b[7][1]++,codigo.length!=12)){cov_24tl83nxh5().b[6][0]++;cov_24tl83nxh5().s[13]++;return res.status(400).send({message:"Codigo invalido"});}else{cov_24tl83nxh5().b[6][1]++;}cov_24tl83nxh5().s[14]++;Producto.findOne({_id:codigo},function(err,data){cov_24tl83nxh5().f[3]++;cov_24tl83nxh5().s[15]++;if(err){cov_24tl83nxh5().b[8][0]++;cov_24tl83nxh5().s[16]++;return res.status(500).json({message:"Error al obtener el producto",db_message:(cov_24tl83nxh5().b[9][0]++,err.message)||(cov_24tl83nxh5().b[9][1]++,"")});}else{cov_24tl83nxh5().b[8][1]++;}cov_24tl83nxh5().s[17]++;if(!data){cov_24tl83nxh5().b[10][0]++;cov_24tl83nxh5().s[18]++;return res.status(404).json({message:`El producto ${codigo} no existe`});}else{cov_24tl83nxh5().b[10][1]++;}cov_24tl83nxh5().s[19]++;return res.json(data);});};// Modificar un producto por su codigo
cov_24tl83nxh5().s[20]++;exports.update=(req,res)=>{cov_24tl83nxh5().f[4]++;cov_24tl83nxh5().s[21]++;if((cov_24tl83nxh5().b[12][0]++,!req.body.nombre)&&(cov_24tl83nxh5().b[12][1]++,!req.body.vendedor)&&(cov_24tl83nxh5().b[12][2]++,!req.body.descripcion)&&(cov_24tl83nxh5().b[12][3]++,!req.body.tags)&&(cov_24tl83nxh5().b[12][4]++,!req.body.precio)){cov_24tl83nxh5().b[11][0]++;cov_24tl83nxh5().s[22]++;return res.status(400).send({message:"No se enviaron datos a modificar"});}else{cov_24tl83nxh5().b[11][1]++;}const codigo=(cov_24tl83nxh5().s[23]++,req.params.codigo);cov_24tl83nxh5().s[24]++;if((cov_24tl83nxh5().b[14][0]++,codigo.length!=24)&&(cov_24tl83nxh5().b[14][1]++,codigo.length!=12)){cov_24tl83nxh5().b[13][0]++;cov_24tl83nxh5().s[25]++;return res.status(400).send({message:"Codigo invalido"});}else{cov_24tl83nxh5().b[13][1]++;}cov_24tl83nxh5().s[26]++;Producto.findOneAndUpdate({_id:codigo},req.body,{useFindAndModify:false,new:true}).then(data=>{cov_24tl83nxh5().f[5]++;cov_24tl83nxh5().s[27]++;if(!data){cov_24tl83nxh5().b[15][0]++;cov_24tl83nxh5().s[28]++;return res.status(404).json({message:`El producto ${codigo} no existe`});}else{cov_24tl83nxh5().b[15][1]++;}cov_24tl83nxh5().s[29]++;return res.json({message:'Modificado',producto:data});}).catch(err=>{cov_24tl83nxh5().f[6]++;cov_24tl83nxh5().s[30]++;res.status(500).json({message:`Error modificando el producto ${codigo}`,db_message:(cov_24tl83nxh5().b[16][0]++,err.message)||(cov_24tl83nxh5().b[16][1]++,"")});});};// Elimina un producto por su codigo
cov_24tl83nxh5().s[31]++;exports.delete=(req,res)=>{cov_24tl83nxh5().f[7]++;const codigo=(cov_24tl83nxh5().s[32]++,req.params.codigo);cov_24tl83nxh5().s[33]++;if((cov_24tl83nxh5().b[18][0]++,codigo.length!=24)&&(cov_24tl83nxh5().b[18][1]++,codigo.length!=12)){cov_24tl83nxh5().b[17][0]++;cov_24tl83nxh5().s[34]++;return res.status(400).send({message:"Codigo invalido"});}else{cov_24tl83nxh5().b[17][1]++;}cov_24tl83nxh5().s[35]++;Producto.findOneAndRemove({_id:codigo}).then(data=>{cov_24tl83nxh5().f[8]++;cov_24tl83nxh5().s[36]++;if(!data){cov_24tl83nxh5().b[19][0]++;cov_24tl83nxh5().s[37]++;return res.status(404).send({message:`El producto ${codigo} no existe.`});}else{cov_24tl83nxh5().b[19][1]++;}cov_24tl83nxh5().s[38]++;return res.send({message:`Eliminado`});}).catch(err=>{cov_24tl83nxh5().f[9]++;cov_24tl83nxh5().s[39]++;return res.status(500).json({message:`Error al eliminar el producto ${codigo}`,db_message:(cov_24tl83nxh5().b[20][0]++,err.message)||(cov_24tl83nxh5().b[20][1]++,"")});});};// Obtener todos los productos
cov_24tl83nxh5().s[40]++;exports.getAll=(_req,res)=>{cov_24tl83nxh5().f[10]++;cov_24tl83nxh5().s[41]++;Producto.find({}).then(data=>{cov_24tl83nxh5().f[11]++;cov_24tl83nxh5().s[42]++;return res.json(data);}).catch(err=>{cov_24tl83nxh5().f[12]++;cov_24tl83nxh5().s[43]++;return res.status(500).json({message:"Error al retornar todos los productos en la BD",db_message:(cov_24tl83nxh5().b[21][0]++,err.message)||(cov_24tl83nxh5().b[21][1]++,"")});});};// Buscar producto
cov_24tl83nxh5().s[44]++;exports.find=(req,res)=>{cov_24tl83nxh5().f[13]++;cov_24tl83nxh5().s[45]++;if(req.query.search==undefined){cov_24tl83nxh5().b[22][0]++;cov_24tl83nxh5().s[46]++;return res.status(400).send({message:"La busqueda no puede estar vacia"});}else{cov_24tl83nxh5().b[22][1]++;}const consulta=(cov_24tl83nxh5().s[47]++,req.query.search.replace(/ /g,"|").replace(/,/g,""));cov_24tl83nxh5().s[48]++;if(!consulta){cov_24tl83nxh5().b[23][0]++;cov_24tl83nxh5().s[49]++;return res.status(400).send({message:"La busqueda no puede estar vacia"});}else{cov_24tl83nxh5().b[23][1]++;}cov_24tl83nxh5().s[50]++;Producto.find({$or:[{nombre:{$regex:consulta,$options:"i"}},{vendedor:{$regex:consulta,$options:"i"}},{descripcion:{$regex:consulta,$options:"i"}}]},function(err,data){cov_24tl83nxh5().f[14]++;cov_24tl83nxh5().s[51]++;if(err){cov_24tl83nxh5().b[24][0]++;cov_24tl83nxh5().s[52]++;return res.status(500).json({message:"Error al realizar la busqueda de productos",db_message:(cov_24tl83nxh5().b[25][0]++,err.message)||(cov_24tl83nxh5().b[25][1]++,"")});}else{cov_24tl83nxh5().b[24][1]++;}cov_24tl83nxh5().s[53]++;if(data.length==0){cov_24tl83nxh5().b[26][0]++;cov_24tl83nxh5().s[54]++;return res.status(404).json({message:`No se encontraron productos con la `+`busqueda "${consulta}"`});}else{cov_24tl83nxh5().b[26][1]++;}cov_24tl83nxh5().s[55]++;return res.json(data);});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2R1Y3RvLmpzIl0sIm5hbWVzIjpbImRiIiwicmVxdWlyZSIsIlByb2R1Y3RvIiwicHJvZHVjdG8iLCJleHBvcnRzIiwiY3JlYXRlIiwicmVxIiwicmVzIiwiYm9keSIsIm5vbWJyZSIsInZlbmRlZG9yIiwicHJlY2lvIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJkZXNjcmlwY2lvbiIsInRhZ3MiLCJlcnIiLCJwcm9kdWN0IiwiZGJfbWVzc2FnZSIsImZpbmRPbmUiLCJjb2RpZ28iLCJwYXJhbXMiLCJsZW5ndGgiLCJzZW5kIiwiX2lkIiwiZGF0YSIsInVwZGF0ZSIsImZpbmRPbmVBbmRVcGRhdGUiLCJ1c2VGaW5kQW5kTW9kaWZ5IiwibmV3IiwidGhlbiIsImNhdGNoIiwiZGVsZXRlIiwiZmluZE9uZUFuZFJlbW92ZSIsImdldEFsbCIsIl9yZXEiLCJmaW5kIiwicXVlcnkiLCJzZWFyY2giLCJ1bmRlZmluZWQiLCJjb25zdWx0YSIsInJlcGxhY2UiLCIkb3IiLCIkcmVnZXgiLCIkb3B0aW9ucyJdLCJtYXBwaW5ncyI6IjRvWUFlWTsyRkFmWixLQUFNQSxDQUFBQSxFQUFFLDBCQUFHQyxPQUFPLENBQUMsV0FBRCxDQUFWLENBQVIsQ0FDQSxLQUFNQyxDQUFBQSxRQUFRLDBCQUFHRixFQUFFLENBQUNHLFFBQU4sQ0FBZCxDLHdCQUVBQyxPQUFPLENBQUNGLFFBQVIsQ0FBbUJBLFFBQW5CLENBRUE7d0JBQ0FFLE9BQU8sQ0FBQ0MsTUFBUixDQUFpQixDQUFDQyxHQUFELENBQU1DLEdBQU4sR0FBYyxpREFFOUIsR0FBSSw2QkFBQ0QsR0FBRyxDQUFDRSxJQUFKLENBQVNDLE1BQVYsK0JBQW9CLENBQUNILEdBQUcsQ0FBQ0UsSUFBSixDQUFTRSxRQUE5QiwrQkFBMEMsQ0FBQ0osR0FBRyxDQUFDRSxJQUFKLENBQVNHLE1BQXBELENBQUosQ0FBZ0Usb0RBQy9ELE1BQU9KLENBQUFBLEdBQUcsQ0FBQ0ssTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhC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QUcsQ0FBQ00sSUFBSixDQUFTYSxJQUFULENBQVAsQ0FDSCxDQWhDTCxFQWlDSCxDQS9DRCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGRiID0gcmVxdWlyZShcIi4uL21vZGVsc1wiKTtcclxuY29uc3QgUHJvZHVjdG8gPSBkYi5wcm9kdWN0bztcclxuXHJcbmV4cG9ydHMuUHJvZHVjdG8gPSBQcm9kdWN0bztcclxuXHJcbi8vIENyZWFyIHkgZ3VhcmRhciB1biBwcm9kdWN0b1xyXG5leHBvcnRzLmNyZWF0ZSA9IChyZXEsIHJlcykgPT4ge1xyXG5cclxuXHRpZiAoIXJlcS5ib2R5Lm5vbWJyZSB8fCAhcmVxLmJvZHkudmVuZGVkb3IgfHwgIXJlcS5ib2R5LnByZWNpbykge1xyXG5cdFx0cmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJMb3MgZGF0b3MgZW52aWFkb3MgZGVsIHByb2R1Y3RvIHNvbiBpbmNvcnJlY3Rvc1wiIH0pO1xyXG5cdH1cclxuXHJcblx0UHJvZHVjdG8uY3JlYXRlKHtcclxuXHRcdG5vbWJyZTogcmVxLmJvZHkubm9tYnJlLFxyXG5cdFx0dmVuZGVkb3I6IHJlcS5ib2R5LnZlbmRlZG9yLFxyXG5cdFx0cHJlY2lvOiByZXEuYm9keS5wcmVjaW8sXHJcblx0XHRkZXNjcmlwY2lvbjogcmVxLmJvZHkuZGVzY3JpcGNpb24gfHwgXCJObyBjYXRlZ29yaXphZG9cIixcclxuXHRcdHRhZ3M6IHJlcS5ib2R5LnRhZ3MgfHwgW11cclxuXHR9LFxyXG5cdFx0Ly8gY2FsbGJhY2tcclxuXHRcdChlcnIsIHByb2R1Y3QpID0+IHtcclxuXHRcdFx0aWYgKGVycikge1xyXG5cdFx0XHRcdHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcblx0XHRcdFx0XHRkYl9tZXNzYWdlOiBlcnIubWVzc2FnZSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0bWVzc2FnZTogXCJFcnJvciBhbCBhZ3JlZ2FyIHByb2R1Y3RvXCJcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oe1xyXG5cdFx0XHRcdHByb2R1Y3RvOiBwcm9kdWN0LFxyXG5cdFx0XHRcdG1lc3NhZ2U6IFwiQ3JlYWRvXCJcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxufTtcclxuXHJcbi8vIE9idGVuZXIgdW4gcHJvZHVjdG8gY29uIHN1IGNvZGlnb1xyXG5leHBvcnRzLmZpbmRPbmUgPSAocmVxLCByZXMpID0+IHtcclxuXHRjb25zdCBjb2RpZ28gPSByZXEucGFyYW1zLmNvZGlnbztcclxuXHJcblx0aWYgKGNvZGlnby5sZW5ndGggIT0gMjQgJiYgY29kaWdvLmxlbmd0aCAhPSAxMikge1xyXG5cdFx0cmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHtcclxuXHRcdFx0bWVzc2FnZTogXCJDb2RpZ28gaW52YWxpZG9cIlxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRQcm9kdWN0by5maW5kT25lKHsgX2lkOiBjb2RpZ28gfSwgZnVuY3Rpb24gKGVyciwgZGF0YSkge1xyXG5cdFx0aWYgKGVycikge1xyXG5cdFx0XHRyZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG5cdFx0XHRcdG1lc3NhZ2U6IFwiRXJyb3IgYWwgb2J0ZW5lciBlbCBwcm9kdWN0b1wiLFxyXG5cdFx0XHRcdGRiX21lc3NhZ2U6IGVyci5tZXNzYWdlIHx8IFwiXCJcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHRpZiAoIWRhdGEpIHtcclxuXHRcdFx0cmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcclxuXHRcdFx0XHRtZXNzYWdlOiBgRWwgcHJvZHVjdG8gJHtjb2RpZ299IG5vIGV4aXN0ZWBcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHJlcy5qc29uKGRhdGEpO1xyXG5cdH0pO1xyXG59O1xyXG5cclxuLy8gTW9kaWZpY2FyIHVuIHByb2R1Y3RvIHBvciBzdSBjb2RpZ29cclxuZXhwb3J0cy51cGRhdGUgPSAocmVxLCByZXMpID0+IHtcclxuXHRpZiAoIXJlcS5ib2R5Lm5vbWJyZSAmJiAhcmVxLmJvZHkudmVuZGVkb3IgJiYgIXJlcS5ib2R5LmRlc2NyaXBjaW9uICYmICFyZXEuYm9keS50YWdzICYmICFyZXEuYm9keS5wcmVjaW8pIHtcclxuXHRcdHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCh7XHJcblx0XHRcdG1lc3NhZ2U6IFwiTm8gc2UgZW52aWFyb24gZGF0b3MgYSBtb2RpZmljYXJcIlxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRjb25zdCBjb2RpZ28gPSByZXEucGFyYW1zLmNvZGlnbztcclxuXHJcblx0aWYgKGNvZGlnby5sZW5ndGggIT0gMjQgJiYgY29kaWdvLmxlbmd0aCAhPSAxMikge1xyXG5cdFx0cmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHtcclxuXHRcdFx0bWVzc2FnZTogXCJDb2RpZ28gaW52YWxpZG9cIlxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRQcm9kdWN0by5maW5kT25lQW5kVXBkYXRlKHsgX2lkOiBjb2RpZ28gfSwgcmVxLmJvZHksIHsgdXNlRmluZEFuZE1vZGlmeTogZmFsc2UsIG5ldzogdHJ1ZSB9KVxyXG5cdFx0LnRoZW4oZGF0YSA9PiB7XHJcblx0XHRcdGlmICghZGF0YSkge1xyXG5cdFx0XHRcdHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XHJcblx0XHRcdFx0XHRtZXNzYWdlOiBgRWwgcHJvZHVjdG8gJHtjb2RpZ299IG5vIGV4aXN0ZWBcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHJlcy5qc29uKHtcclxuXHRcdFx0XHRtZXNzYWdlOiAnTW9kaWZpY2FkbycsXHJcblx0XHRcdFx0cHJvZHVjdG86IGRhdGFcclxuXHRcdFx0fSk7XHJcblx0XHR9KVxyXG5cdFx0LmNhdGNoKGVyciA9PiB7XHJcblx0XHRcdHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuXHRcdFx0XHRtZXNzYWdlOiBgRXJyb3IgbW9kaWZpY2FuZG8gZWwgcHJvZHVjdG8gJHtjb2RpZ299YCxcclxuXHRcdFx0XHRkYl9tZXNzYWdlOiBlcnIubWVzc2FnZSB8fCBcIlwiXHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcbn07XHJcblxyXG4vLyBFbGltaW5hIHVuIHByb2R1Y3RvIHBvciBzdSBjb2RpZ29cclxuZXhwb3J0cy5kZWxldGUgPSAocmVxLCByZXMpID0+IHtcclxuXHRjb25zdCBjb2RpZ28gPSByZXEucGFyYW1zLmNvZGlnbztcclxuXHJcblx0aWYgKGNvZGlnby5sZW5ndGggIT0gMjQgJiYgY29kaWdvLmxlbmd0aCAhPSAxMikge1xyXG5cdFx0cmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHtcclxuXHRcdFx0bWVzc2FnZTogXCJDb2RpZ28gaW52YWxpZG9cIlxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRQcm9kdWN0by5maW5kT25lQW5kUmVtb3ZlKHsgX2lkOiBjb2RpZ28gfSlcclxuXHRcdC50aGVuKGRhdGEgPT4ge1xyXG5cdFx0XHRpZiAoIWRhdGEpIHtcclxuXHRcdFx0XHRyZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoe1xyXG5cdFx0XHRcdFx0bWVzc2FnZTogYEVsIHByb2R1Y3RvICR7Y29kaWdvfSBubyBleGlzdGUuYFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gcmVzLnNlbmQoe1xyXG5cdFx0XHRcdG1lc3NhZ2U6IGBFbGltaW5hZG9gXHJcblx0XHRcdH0pO1xyXG5cdFx0fSlcclxuXHRcdC5jYXRjaChlcnIgPT4ge1xyXG5cdFx0XHRyZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG5cdFx0XHRcdG1lc3NhZ2U6IGBFcnJvciBhbCBlbGltaW5hciBlbCBwcm9kdWN0byAke2NvZGlnb31gLFxyXG5cdFx0XHRcdGRiX21lc3NhZ2U6IGVyci5tZXNzYWdlIHx8IFwiXCJcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxufTtcclxuXHJcbi8vIE9idGVuZXIgdG9kb3MgbG9zIHByb2R1Y3Rvc1xyXG5leHBvcnRzLmdldEFsbCA9IChfcmVxLCByZXMpID0+IHtcclxuXHRQcm9kdWN0by5maW5kKHt9KVxyXG5cdFx0LnRoZW4oZGF0YSA9PiB7XHJcblx0XHRcdHJldHVybiByZXMuanNvbihkYXRhKTtcclxuXHRcdH0pXHJcblx0XHQuY2F0Y2goZXJyID0+IHtcclxuXHRcdFx0cmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuXHRcdFx0XHRtZXNzYWdlOiBcIkVycm9yIGFsIHJldG9ybmFyIHRvZG9zIGxvcyBwcm9kdWN0b3MgZW4gbGEgQkRcIixcclxuXHRcdFx0XHRkYl9tZXNzYWdlOiBlcnIubWVzc2FnZSB8fCBcIlwiXHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcbn07XHJcblxyXG4vLyBCdXNjYXIgcHJvZHVjdG9cclxuZXhwb3J0cy5maW5kID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBpZiAocmVxLnF1ZXJ5LnNlYXJjaCA9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoe1xyXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkxhIGJ1c3F1ZWRhIG5vIHB1ZWRlIGVzdGFyIHZhY2lhXCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNvbnN0IGNvbnN1bHRhID0gcmVxLnF1ZXJ5LnNlYXJjaC5yZXBsYWNlKC8gL2csIFwifFwiKVxyXG4gICAgICAgIC5yZXBsYWNlKC8sL2csIFwiXCIpO1xyXG5cclxuICAgIGlmICghY29uc3VsdGEpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoe1xyXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkxhIGJ1c3F1ZWRhIG5vIHB1ZWRlIGVzdGFyIHZhY2lhXCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFByb2R1Y3RvLmZpbmQoe1xyXG4gICAgICAgICAgICAkb3I6IFt7XHJcbiAgICAgICAgICAgICAgICBub21icmU6IHtcclxuICAgICAgICAgICAgICAgICAgICAkcmVnZXg6IGNvbnN1bHRhLFxyXG4gICAgICAgICAgICAgICAgICAgICRvcHRpb25zOiBcImlcIlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICB2ZW5kZWRvcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICRyZWdleDogY29uc3VsdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgJG9wdGlvbnM6IFwiaVwiXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgIGRlc2NyaXBjaW9uOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHJlZ2V4OiBjb25zdWx0YSxcclxuICAgICAgICAgICAgICAgICAgICAkb3B0aW9uczogXCJpXCJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfV1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGZ1bmN0aW9uKGVyciwgZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRXJyb3IgYWwgcmVhbGl6YXIgbGEgYnVzcXVlZGEgZGUgcHJvZHVjdG9zXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZGJfbWVzc2FnZTogZXJyLm1lc3NhZ2UgfHwgXCJcIlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRhdGEubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYE5vIHNlIGVuY29udHJhcm9uIHByb2R1Y3RvcyBjb24gbGEgYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBidXNxdWVkYSBcIiR7Y29uc3VsdGF9XCJgXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbn07Il19